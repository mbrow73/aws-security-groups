account_id: "111222333444"
environment: "prod"

security_groups:
  api-backend:
    description: "API backend service"
    tags:
      "<company>-app-env": "prod"
      "<company>-data-classification": "internal"
      "<company>-app-carid": "600001725"
      "<company>-ops-supportgroup": "Security_Operations_Support"
      "<company>-app-supportgroup": "Security_Operations_Support"
      "<company>-provisioner-repo": "placeholder"
      "<company>-iam-access-control": "netsec"
      "<company>-provisioner-workspace": "600001725-prod-sg-111222333444"
    ingress:
      - protocol: "tcp"
        from_port: 8080
        to_port: 8080
        cidr_blocks: ["10.0.0.0/8"]
        description: "HTTP from internal"
    egress:
      - protocol: "tcp"
        from_port: 443
        to_port: 443
        cidr_blocks: ["10.0.0.0/8"]
        description: "HTTPS to VPC endpoints"

  rds-postgres:
    description: "PostgreSQL database"
    tags:
      "<company>-app-env": "prod"
      "<company>-data-classification": "internal"
      "<company>-app-carid": "600001725"
      "<company>-ops-supportgroup": "Security_Operations_Support"
      "<company>-app-supportgroup": "Security_Operations_Support"
      "<company>-provisioner-repo": "placeholder"
      "<company>-iam-access-control": "netsec"
      "<company>-provisioner-workspace": "600001725-prod-sg-111222333444"
    ingress:
      - protocol: "tcp"
        from_port: 5432
        to_port: 5432
        cidr_blocks: ["10.50.0.0/16"]
        description: "PostgreSQL from app tier"
    egress: []

  redis-cache:
    description: "Redis cache cluster"
    tags:
      "<company>-app-env": "prod"
      "<company>-data-classification": "internal"
      "<company>-app-carid": "600001725"
      "<company>-ops-supportgroup": "Security_Operations_Support"
      "<company>-app-supportgroup": "Security_Operations_Support"
      "<company>-provisioner-repo": "placeholder"
      "<company>-iam-access-control": "netsec"
      "<company>-provisioner-workspace": "600001725-prod-sg-111222333444"
    ingress:
      - protocol: "tcp"
        from_port: 6379
        to_port: 6379
        cidr_blocks: ["10.50.0.0/16"]
        description: "Redis from app tier"
      - protocol: "tcp"
        from_port: 6379
        to_port: 6379
        self: true
        description: "Redis cluster replication"
    egress:
      - protocol: "tcp"
        from_port: 6379
        to_port: 6379
        self: true
        description: "Redis cluster replication outbound"
