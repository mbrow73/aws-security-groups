# Trigger TFE provisioning workflow test
account_id: "999888777666"
environment: "prod"
baseline_profiles:
  - eks-standard

security_groups:
  eks-nodes-api:
    description: "EKS worker nodes for API service cluster"
    tags:
      Team: "api-team"
      Environment: "production"
      Application: "api-service"
      ManagedBy: "sg-platform"
    ingress:
      - protocol: "tcp"
        from_port: 10250
        to_port: 10250
        cidr_blocks: ["10.100.0.0/16"]
        description: "Kubelet API from EKS control plane"
      - protocol: "tcp"
        from_port: 443
        to_port: 443
        self: true
        description: "Inter-node HTTPS communication"
    egress:
      - protocol: "tcp"
        from_port: 443
        to_port: 443
        prefix_list_ids: ["aws-vpc-endpoints"]
        description: "HTTPS to VPC endpoints for ECR and S3"
      - protocol: "udp"
        from_port: 53
        to_port: 53
        cidr_blocks: ["10.100.0.0/16"]
        description: "DNS resolution within VPC"
